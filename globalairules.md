1) Общий стиль и процесс ответа
   - Язык: русский. Формат: предельно конкретно и по делу.
   - Всегда используй структуру:
     A. План — короткий пошаговый план (3–7 пунктов).
     B. Изменения — пофайловые патчи с указанием путей. Несколько файлов — несколько блоков. Новый файл помечай "new", удалённый — "delete" с кратким объяснением.
     C. Почему — 2–5 тезисов (архитектура, производительность, DX, a11y, безопасность).
     D. Проверки — краткий чек-лист (линтер, сборка, ручной сценарий).
   - При неоднозначности — выбери лучшее предположение и сделай частичную реализацию с пометками замены.

2) Линтеры, форматирование, зависимости
   - Соблюдай локальные правила форматирования и линтинга; не меняй стиль без веских причин.
   - Не добавляй зависимости, если задачу можно решить штатно. Если добавляешь — объясни зачем и укажи точную команду установки.
   - Импорты: используй понятную структуру модулей; named-exports предпочтительны; barrel-экспорты — если улучшают DX и не скрывают границы модулей.

3) Рендеринг и работа с данными
   - Минимизируй работу на клиенте: всё, что можно вычислить заранее или на сервере, делай вне основного потока браузера.
   - Старайся уменьшать количество запросов: батчинг, кэширование, условная/отложенная загрузка.
   - Для интерфейса с тяжёлыми блоками применяй ленивую загрузку и разбивку кода.

4) Производительность — цели и бюджеты (Lighthouse)
   - Цели: LCP ≤ 2.5 s (идеал ≤ 2.0 s), INP < 200 ms, CLS < 0.1, FCP ≤ 1.8 s, TTFB ≤ 0.5 s.
   - Бюджеты на страницу (gzip): JS ≤ 170 KB, CSS ≤ 50 KB; главное изображение (hero/LCP) ≤ 200 KB; ошибок в консоли = 0.
   - Сети: включай современное сжатие, используй `preconnect`/`dns-prefetch` к критичным источникам; применяй preload/`fetchpriority` там, где это ускоряет LCP.
   - Изображения: адаптивные `srcset/sizes`, `width/height` для предотвращения сдвигов, `loading="lazy"`, `decoding="async"`, предпочтительно WebP/AVIF; не грузить оригиналы без нужды.
   - Шрифты: предзагружай критичные, используй `font-display: swap|optional`, подмножества (subset) для снижения веса.
   - Сокращай работу main-thread: мемоизация результатов, устранение лишних перерисовок и эффектов, избегай тяжёлых зависимостей; следи за tree-shaking.

5) SEO — базовые требования
   - На каждой странице заданы `title`, `description`, `canonical`; корректные OG/Twitter мета-теги.
   - Поддерживай `sitemap.xml` и `robots.txt`; превью/стейджинг — `noindex`/Disallow.
   - i18n: у языковых версий есть `hreflang`; один канонический URL на язык.
   - Семантика: один `<h1>` на страницу, валидная иерархия заголовков; внутренняя перелинковка осмысленна.
   - Структурированные данные (JSON-LD) для релевантных сущностей (Organization, Article/Course и т.п.).
   - Чистые URL-ы, единая политика слэшей; избегай дублей и длинных 301-цепочек; быстрые 404/500.

6) Доступность (a11y)
   - Полная навигация с клавиатуры; видимые фокус-кольца; внедряй skip-link к основному контенту.
   - Семантика: действия — элемент с ролью кнопки, переходы — ссылка с `href`; не подменяй их div-ами.
   - Контраст WCAG AA (обычный текст ≥ 4.5:1); кликабельные зоны ≥ 44×44 px.
   - Изображения: содержательный `alt`; декоративные — `alt=""`.
   - Формы: связка `label`↔`input`, состояния ошибок (`aria-invalid`, `aria-describedby`) и понятные тексты ошибок.
   - Динамика/уведомления: `aria-live`/`role="status"`; избегай ловушек фокуса в модалках.
   - Уважай пользовательские предпочтения: `prefers-reduced-motion`, `prefers-contrast`, `prefers-color-scheme`.
   - Локализация: корректный `lang`/`dir`, форматы дат/чисел/валют соответствуют локали.

7) Безопасность (клиент)
   - Не логируй секреты; ключи/токены — только через переменные окружения и только там, где это безопасно.
   - Избегай небезопасного HTML; вставки выполняй только с явной санацией.
   - Для внешних ссылок в новой вкладке используй `rel="noopener noreferrer"`.
   - Учитывай XSS/CSRF/Clickjacking в пользовательских потоках.

8) Best Practices (web)
   - Третьи скрипты подключай отложенно и только при реальной необходимости (`async`/`defer`, согласованный момент инициализации).
   - Для статических ресурсов настраивай долгоживущие кэши: `Cache-Control: public, max-age=31536000, immutable` (где уместно).
   - Обрабатывай пустые состояния, skeleton-экраны, ошибки; не оставляй «мёртвых» ссылок и якорей.
   - Все не-прод окружения — `noindex`.
   - Строки интерфейса не хардкодь — поддерживай локализацию и форматирование.

9) Конвенции кода
   - Именование: директории/утилиты — `kebab-case`, компоненты/сущности — `PascalCase`, вспомогательные функции — `camelCase`.
   - Не плодить «index»-файлы без необходимости; если используешь — продуманные barrel-экспорты.
   - Стили: классы и токены оформляй последовательно; инлайновые стили — только в исключительных случаях.
   - Ясные публичные API модулей: сигнатуры и контракты документируй кратко (JSDoc/комментарии).
   - Ошибки и результаты — явные и предсказуемые объекты (например, Result/Error-паттерн).

10) Чек-лист ревью (для ассистента)
   - Пути/импорты корректны; структура модулей непротиворечива.
   - Сборка проходит; линтер/форматирование без ошибок.
   - Нет регрессий по a11y/SEO (alt/label/meta/структура заголовков).
   - Нет лишних перерисовок; соблюдены перф-бюджеты; консоль без ошибок.
   - Границы модулей и слоёв не нарушены; зависимостей больше не стало без причины.

11) Диагностика и ответы на вопросы
   - Нашёл баг — сначала укажи точную причину, затем дай фикс как пофайловый патч.
   - Минимальные примеры — только если ускоряют понимание.
   - Не выдумывай несуществующие API; если чего-то нет — предложи минимальную реализацию в рамках проекта.
